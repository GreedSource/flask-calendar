{% extends "master.html" %}
{% block title %}
  Flask calendar
{% endblock %}
{% block content %}
<div class="box box-primary">
    <div class="box-header with-border">
      <h3 class="box-title">Subir archivo</h3>
    </div>
    <!-- /.box-header -->
    <!-- form start -->
    <form onsubmit="upload_file(this, event)" enctype="multipart/form-data">
      <div class="box-body">
        <div class="form-group">
          <label for="exampleInputFile">File input</label>
          <input type="file" id="archivo" accept=".xlsx" name="archivo">
          <p class="help-block">Seleccione el archivo en formato excel (xlsx).</p>
        </div>
      </div>
      <!-- /.box-body -->

      <div class="box-footer">
        <button type="submit" class="btn btn-primary">Enviar</button>
      </div>
    </form>
  </div>
{% endblock %}

{% block js_files %}
  <script>
      //console.log('Hello world')

    function upload_file(form, event){
      event.preventDefault();
      var formData = new FormData(form);

      $.ajax({
        url: '{{url_for("pandas")}}',
        type: 'post',
        data: formData,
        success: function(data){
          alert(data);
        },
        cache: false,
        contentType: false,
        processData: false
      })

    }

  </script>
{% endblock %}